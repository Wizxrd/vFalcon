<adonisControls:AdonisWindow
    x:Name="EramViewAdonisWindow"
    x:Class="vFalcon.EramView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:vFalcon"
    mc:Ignorable="d"
    xmlns:views="clr-namespace:vFalcon.Views"
    xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
    xmlns:adonisControls="clr-namespace:AdonisUI.Controls;assembly=AdonisUI"
    xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
    IconVisibility="Collapsed"
    MinWidth="250" Width="1280" MinHeight="250" Height="720"
    FontFamily="Consolas" FontSize="12"
    Foreground="{StaticResource White}" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
    KeyDown="EramKeyDown"
    KeyUp="EramKeyUp"
    MouseDown="EramMouseDown"
    MouseWheel="RemovePilotContext"
    SizeChanged="EramSizeChanged"
    StateChanged="RemovePilotContext"
    Deactivated="RemovePilotContext">
    <adonisControls:AdonisWindow.InputBindings>
        <KeyBinding
            Key="E"
            Modifiers="Ctrl"
            Command="{Binding ExitRecordingCommand}"/>
        <KeyBinding 
            Key="T" 
            Modifiers="Ctrl" 
            Command="{Binding ToggleTdmCommand}"/>
        <KeyBinding
            Key="L"
            Modifiers="Ctrl"
            Command="{Binding LoadRecordingCommand}"/>
        <KeyBinding
            Key="R"
            Modifiers="Ctrl+Shift"
            Command="{Binding StartStopRecordingCommand}"/>
        <KeyBinding
            Key="P"
            Modifiers="Ctrl+Shift"
            Command="{Binding SwitchProfileCommand}"/>
        <KeyBinding
            Key="G"
            Modifiers="Ctrl"
            Command="{Binding GeneralSettingsCommand}"/>
        <KeyBinding
            Key="F12"
            Modifiers="Ctrl"
            Command="{Binding ActivateSectorCommand}"/>
        <KeyBinding
            Key="PageUp"
            Command="{Binding IncreaseVelocityVectorCommand}"/>
        <KeyBinding
            Key="PageDown"
            Command="{Binding DecreaseVelocityVectorCommand}"/>
        <KeyBinding
            Key="Left"
            Command="{Binding RewindCommand}"/>
        <KeyBinding
            Key="Space"
            Command="{Binding PlayPauseCommand}"/>
        <KeyBinding
            Key="Right"
            Command="{Binding FastForwardCommand}"/>
    </adonisControls:AdonisWindow.InputBindings>
    <adonisControls:AdonisWindow.TitleBarContent>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="-8,0,0,0">
            <Button
                BorderBrush="Transparent"
                BorderThickness="0"
                adonisExtensions:CursorSpotlightExtension.BorderBrush="Transparent"
                Background="Transparent"
                Content="Menu"
                Click="MenuButtonClick">
            </Button>
            <TextBlock
                Margin="5,0,5,0"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Text="{Binding Title}">
            </TextBlock>
            <TextBlock
                Margin="5,0,0,0"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Foreground="#e81123"
                Text="{Binding RecordingStatus}">
            </TextBlock>
            <Popup
                x:Name="MenuPopup"
                PlacementTarget="{Binding ElementName=MenuButton}"
                Placement="Bottom"
                StaysOpen="False">
                <views:MenuView x:Name="MenuPopupControl"/>
            </Popup>
        </StackPanel>
    </adonisControls:AdonisWindow.TitleBarContent>
    <WindowChrome.WindowChrome>
        <WindowChrome GlassFrameThickness="0" CornerRadius="0" CaptionHeight="0"/>
    </WindowChrome.WindowChrome>
    <Border>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Border x:Name="TestingBorder" Grid.Row="0" Background="{Binding Background}">
                <Grid>
                    <views:RadarView x:Name="RadarView" Background="{Binding Background, ElementName=TestingBorder}" DataContext="{Binding RadarViewModel}"/>
                    <ContentControl
                        Margin="5,0,5,5"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Stretch"
                        Visibility="{Binding ReplayControlVisibility}"
                        Content="{Binding ReplayControlsContent}">
                    </ContentControl>
                    <ContentControl
                        x:Name="ToolbarRegion"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Top"
                        Content="{Binding MasterToolbarContent}"
                        Panel.ZIndex="{Binding ToolbarRegionZIndex}"/>
                    <Canvas Panel.ZIndex="{Binding CanvasZIndex}">
                        <Border
                               x:Name="TimeBorder" Margin="{Binding ZuluMargin}"
                               Background="{Binding Background, ElementName=TestingBorder}" BorderBrush="White" BorderThickness="1"
                               Width="90" Height="26"
                               Canvas.Top="{Binding TimeBorderTop}"
                               Canvas.Left="{Binding TimeBorderLeft}"
                               Canvas.Bottom="{Binding TimeBorderBottom}"
                               Canvas.Right="{Binding TimeBorderRight}">
                            <TextBlock
                                   Foreground="White"
                                   Text="{Binding ZuluTime}"
                                   FontFamily="/vFalcon;component/Resources/Fonts/#ERAM" FontSize="14"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center">
                            </TextBlock>
                        </Border>
                    </Canvas>
                    <Canvas Panel.ZIndex="10" x:Name="ToolbarControlCanvas">
                        <ContentControl
                            Margin="{Binding ToolbarControlMargin}"
                            x:Name="ToolbarControl"
                            Canvas.Top="{Binding ToolbarControlTop}"
                            Canvas.Left="{Binding ToolbarControlLeft}"
                            Canvas.Right="{Binding ToolbarControlRight}"
                            Canvas.Bottom="{Binding ToolbarControlBottom}"
                            Content="{Binding ToolbarControlContent}"/>
                    </Canvas>
                    <TextBlock
                        Text="{Binding GeoMapStatus}"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Foreground="Red"
                        FontFamily="pack://application:,,,/vFalcon;component/Resources/Fonts/ERAM.ttf#ERAM Regular"
                        FontSize="24">
                    </TextBlock>
                    <Popup
                        x:Name="PilotContext"
                        StaysOpen="True"
                        Placement="Relative">
                        <views:PilotContextView x:Name="PilotContextControl"/>
                    </Popup>
                </Grid>
            </Border>
        </Grid>
    </Border>
</adonisControls:AdonisWindow>
