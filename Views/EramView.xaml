<adonisControls:AdonisWindow
    x:Name="EramViewAdonisWindow"
    x:Class="vFalcon.EramView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:local="clr-namespace:vFalcon"
    mc:Ignorable="d"
    xmlns:views="clr-namespace:vFalcon.Views"
    xmlns:adonisUi="clr-namespace:AdonisUI;assembly=AdonisUI"
    xmlns:adonisControls="clr-namespace:AdonisUI.Controls;assembly=AdonisUI"
    xmlns:adonisExtensions="clr-namespace:AdonisUI.Extensions;assembly=AdonisUI"
    IconVisibility="Collapsed"
    MinWidth="250" Width="1280" MinHeight="250" Height="720"
    FontFamily="Consolas" FontSize="12"
    Foreground="{StaticResource White}"
    BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
    KeyDown="EramKeyDown"
    KeyUp="EramKeyUp"
    LocationChanged="EramLocationChanged"
    MouseDown="EramMouseDown"
    MouseWheel="RemovePilotContext"
    SizeChanged="EramSizeChanged"
    StateChanged="RemovePilotContext"
    Deactivated="RemovePilotContext"
    MouseMove="EramMouseMove"
    TitleBarBackground="#101010"
    WindowButtonHighlightBrush="#353535">
    <adonisControls:AdonisWindow.InputBindings>
        <KeyBinding
            Key="F"
            Modifiers="Alt"
            Command="{Binding FullscreenCommand}"/>
        <KeyBinding
            Key="T"
            Modifiers="Alt"
            Command="{Binding ToggleTitleBarCommand}"/>
        <KeyBinding
            Key="B"
            Modifiers="Alt"
            Command="{Binding ToggleResizeBorderCommand}"/>
        <KeyBinding
            Key="S"
            Modifiers="Shift+Alt"
            Command="{Binding CaptureScreenCommand}"/>
        <KeyBinding
            Key="S"
            Modifiers="Shift"
            Command="{Binding OpenSearchWindow}"/>
        <KeyBinding
            Key="F"
            Modifiers="Shift"
            Command="{Binding OpenFindWindow}"/>
        <KeyBinding
            Key="Esc"
            Command="{Binding ClearFindCommand}"/>
        <KeyBinding
            Key="E"
            Modifiers="Ctrl"
            Command="{Binding ExitRecordingCommand}"/>
        <KeyBinding 
            Key="T" 
            Modifiers="Ctrl" 
            Command="{Binding ToggleTdmCommand}"/>
        <KeyBinding
            Key="L"
            Modifiers="Ctrl"
            Command="{Binding LoadRecordingCommand}"/>
        <KeyBinding
            Key="R"
            Modifiers="Alt"
            Command="{Binding StartStopRecordingCommand}"/>
        <KeyBinding
            Key="S"
            Modifiers="Ctrl"
            Command="{Binding SaveProfileCommand}"/>
        <KeyBinding
            Key="S"
            Modifiers="Ctrl+Shift"
            Command="{Binding SaveProfileAsCommand}"/>
        <KeyBinding
            Key="P"
            Modifiers="Ctrl+Shift"
            Command="{Binding SwitchProfileCommand}"/>
        <KeyBinding
            Key="G"
            Modifiers="Ctrl"
            Command="{Binding GeneralSettingsCommand}"/>
        <KeyBinding
            Key="F12"
            Modifiers="Ctrl"
            Command="{Binding ActivateSectorCommand}"/>
        <KeyBinding
            Key="PageUp"
            Command="{Binding IncreaseVelocityVectorCommand}"/>
        <KeyBinding
            Key="PageDown"
            Command="{Binding DecreaseVelocityVectorCommand}"/>
        <KeyBinding
            Key="Left"
            Command="{Binding RewindCommand}"/>
        <KeyBinding
            Key="Space"
            Command="{Binding PlayPauseCommand}"/>
        <KeyBinding
            Key="Right"
            Command="{Binding FastForwardCommand}"/>
    </adonisControls:AdonisWindow.InputBindings>
    <adonisControls:AdonisWindow.TitleBarContent>
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="-8,0,0,0">
            <TextBlock
                Margin="5,0,5,0"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Text="{Binding Title}">
            </TextBlock>
            <TextBlock
                Margin="5,0,0,0"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Foreground="#ff5664"
                Text="{Binding RecordingStatus}">
            </TextBlock>
        </StackPanel>
    </adonisControls:AdonisWindow.TitleBarContent>
    <WindowChrome.WindowChrome>
        <WindowChrome GlassFrameThickness="0" CornerRadius="0" CaptionHeight="0"/>
    </WindowChrome.WindowChrome>
    <Border VerticalAlignment="Stretch">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <Border x:Name="TestingBorder" Grid.Row="0" Background="{Binding Background}">
                <Grid>
                    <views:RadarView x:Name="RadarView" Background="{Binding Background, ElementName=TestingBorder}" DataContext="{Binding RadarViewModel}"/>
                    <ContentControl
                        VerticalAlignment="Top"
                        Content="{Binding OptionsToolbarContent}">
                    </ContentControl>
                    <TextBlock
                        Text="{Binding MouseCoordinates}"
                        Foreground="White"
                        FontFamily="pack://application:,,,/vFalcon;component/Resources/Fonts/ERAM.ttf#ERAM Regular"
                        FontSize="16"
                        VerticalAlignment="Top" HorizontalAlignment="Right" Margin="0,37,10,0"/>
                    <ContentControl
                        Margin="5,0,5,5"
                        VerticalAlignment="Bottom"
                        HorizontalAlignment="Stretch"
                        Visibility="{Binding ReplayControlVisibility}"
                        Content="{Binding ReplayControlsContent}">
                    </ContentControl>
                    <TextBlock
                        Text="{Binding GeoMapStatus}"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Foreground="Red"
                        FontFamily="pack://application:,,,/vFalcon;component/Resources/Fonts/ERAM.ttf#ERAM Regular"
                        FontSize="24">
                    </TextBlock>
                    <Popup
                        x:Name="PilotContext"
                        StaysOpen="True"
                        Placement="Relative">
                        <views:PilotContextView x:Name="PilotContextControl"/>
                    </Popup>
                </Grid>
            </Border>
        </Grid>
    </Border>
</adonisControls:AdonisWindow>
